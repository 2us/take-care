#!/usr/bin/env node
var debug = require('debug')('my-application');
var app = require('../app'),
    env = app.get('env'),
    ff = false, //require('../helpers/ff'),
    appConfig,
    port = process.env.PORT || 3000;

if (env === 'development') {
    env = '';
}
appConfig = require('../config' + ((env) ? '.' + env : ''));
if (appConfig && appConfig.app && appConfig.app.port) {
    port = appConfig.app.port;
}
app.set('port', port);

var server = app.listen(app.get('port'), function() {
    var message = 'Express server listening on port ' + server.address().port;

    ff && ff('print_port_on_start') && console.log(message);
    debug(message);
});
